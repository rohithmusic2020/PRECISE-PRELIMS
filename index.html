<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UPSC Prelims Quiz - January 2025</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f9fafb; color: #111827; margin: 0; padding: 0; }
  .container { max-width: 1000px; margin: 30px auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; }
  h1 { text-align: center; color: #1f2937; }
  .sidebar { width: 200px; margin-right: 20px; }
  .sidebar h3 { text-align: center; }
  .status { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; }
  .status div { width: 25px; height: 25px; text-align: center; line-height: 25px; border-radius: 4px; color: white; cursor: pointer; }
  .not-attempted { background: #9ca3af; }
  .attempted { background: #10b981; }
  .review { background: #f59e0b; }
  .question-area { flex: 1; }
  .question { margin-bottom: 20px; }
  .question h3 { margin-bottom: 8px; }
  button { background-color: #2563eb; color: white; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; }
  button:hover { background-color: #1e40af; }
  .result { text-align: center; font-weight: bold; margin-top: 20px; }
  .timer { text-align: right; font-weight: bold; color: #b91c1c; margin-bottom: 20px; }
  #start-screen { text-align: center; }
  input { padding: 8px; border: 1px solid #ccc; border-radius: 6px; margin: 5px; width: 60%; }
  label { display: block; padding: 6px; border: 1px solid #e5e7eb; border-radius: 6px; margin-bottom: 5px; cursor: pointer; }
  .nav-buttons { text-align: center; margin-top: 20px; }
</style>
</head>
<body>
<div class="container">
  <div class="sidebar">
    <h3>Progress</h3>
    <div class="status" id="status-box"></div>
  </div>

  <div class="question-area">
    <h1>UPSC Prelims Quiz - January 2025</h1>
    <div id="start-screen">
      <h2>Enter Your Details</h2>
      <input type="text" id="name" placeholder="Enter your full name" required><br>
      <input type="email" id="email" placeholder="Enter your email" required><br>
      <button onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="quiz-section" style="display:none;">
      <div class="timer">Time Left: <span id="timer">60:00</span></div>
      <div id="quiz"></div>
      <div class="nav-buttons">
        <button onclick="prevPage()">Previous</button>
        <button onclick="markForReview()">Mark for Review</button>
        <button onclick="nextPage()">Next</button>
        <button onclick="submitQuiz()">Submit Quiz</button>
      </div>
      <div class="result" id="result"></div>
    </div>
  </div>
</div>

<script>
const questionsPerPage = 10;
let currentPage = 0;
let status = [];
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbgHewqZxIH0_M-uy4zU6WrnwPI4u8wuDscBgn4QH7KstnYOtIYh3WgKfyG0rgMpI0zQ/exec";
let candidateName = "";
let candidateEmail = "";
let timeLeft = 60 * 60;
let timerInterval;

function startQuiz() {
  candidateName = document.getElementById('name').value.trim();
  candidateEmail = document.getElementById('email').value.trim();
  if (!candidateName || !candidateEmail) {
    alert('Please enter your name and email to start the quiz.');
    return;
  }
  document.getElementById('start-screen').style.display = 'none';
  document.getElementById('quiz-section').style.display = 'block';
  startTimer();
  renderStatus();
  renderPage();
}

function startTimer() {
  const timerElement = document.getElementById('timer');
  timerInterval = setInterval(() => {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerElement.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    timeLeft--;
    if (timeLeft < 0) { clearInterval(timerInterval); submitQuiz(); alert('Time up! Quiz auto-submitted.'); }
  }, 1000);
}

const questions = Array.from({length: 50}, (_, i) => ({
  q: `Sample question ${i+1}?`,
  options: ['Option A', 'Option B', 'Option C', 'Option D'],
  answer: Math.floor(Math.random() * 4)
}));

function renderStatus() {
  const box = document.getElementById('status-box');
  box.innerHTML = '';
  for (let i = 0; i < questions.length; i++) {
    const div = document.createElement('div');
    div.textContent = i + 1;
    div.className = 'not-attempted';
    div.onclick = () => { currentPage = Math.floor(i / questionsPerPage); renderPage(); };
    status.push('not-attempted');
    box.appendChild(div);
  }
}

function renderPage() {
  const quizDiv = document.getElementById('quiz');
  quizDiv.innerHTML = '';
  const start = currentPage * questionsPerPage;
  const end = start + questionsPerPage;
  const pageQuestions = questions.slice(start, end);

  pageQuestions.forEach((q, i) => {
    const qIndex = start + i;
    const div = document.createElement('div');
    div.classList.add('question');
    div.innerHTML = `<h3>Q${qIndex+1}. ${q.q}</h3>` + q.options.map((opt, idx) => `<label><input type='radio' name='q${qIndex}' value='${idx}' onchange='updateStatus(${qIndex})'> ${opt}</label>`).join('');
    quizDiv.appendChild(div);
  });
}

function updateStatus(index) {
  status[index] = 'attempted';
  document.getElementById('status-box').children[index].className = 'attempted';
}

function markForReview() {
  const start = currentPage * questionsPerPage;
  const end = start + questionsPerPage;
  for (let i = start; i < end; i++) {
    if (status[i] !== 'attempted') {
      status[i] = 'review';
      document.getElementById('status-box').children[i].className = 'review';
    }
  }
  nextPage();
}

function nextPage() {
  if ((currentPage + 1) * questionsPerPage < questions.length) {
    currentPage++;
    renderPage();
  }
}

function prevPage() {
  if (currentPage > 0) {
    currentPage--;
    renderPage();
  }
}

function submitQuiz() {
  clearInterval(timerInterval);
  let score = 0, correct=0, wrong=0, unattempted=0;
  questions.forEach((q, i) => {
    const selected = document.querySelector(`input[name='q${i}']:checked`);
    if(!selected){ unattempted++; return; }
    const val = parseInt(selected.value);
    if(val === q.answer){ score += 2; correct++; }
    else { score -= 0.66; wrong++; }
  });
  const total = questions.length;
  alert(`Quiz Completed!\nTotal: ${total}\nCorrect: ${correct}\nWrong: ${wrong}\nUnattempted: ${unattempted}\nFinal Score: ${score.toFixed(2)}`);
}
</script>
</body>
</html>