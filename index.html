<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UPSC Prelims Quiz - February 2025</title>
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f9fafb; color: #111827; margin: 0; padding: 0; }
  .container { display: flex; max-width: 1200px; margin: 20px auto; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); overflow: hidden; }
  .sidebar { width: 200px; background-color: #f3f4f6; padding: 20px; overflow-y: auto; position: sticky; top: 0; height: 100vh; }
  .sidebar h3 { text-align: center; }
  .status { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; }
  .status div { width: 28px; height: 28px; text-align: center; line-height: 28px; border-radius: 6px; color: white; font-size: 14px; cursor: pointer; }
  .not-attempted { background: #9ca3af; }
  .attempted { background: #10b981; }
  .review { background: #f59e0b; }
  .question-area { flex: 1; padding: 30px; overflow-y: auto; height: 100vh; }
  h1 { text-align: center; color: #1f2937; }
  .question { margin-bottom: 20px; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; background: #ffffff; }
  .question h3 { margin-bottom: 10px; }
  label { display: block; padding: 6px; border: 1px solid #e5e7eb; border-radius: 6px; margin-bottom: 5px; cursor: pointer; }
  .timer { text-align: right; font-weight: bold; color: #b91c1c; margin-bottom: 20px; }
  button { background-color: #2563eb; color: white; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; }
  button:hover { background-color: #1e40af; }
  #start-screen { text-align: center; margin-top: 40px; }
  input { padding: 10px; border: 1px solid #ccc; border-radius: 6px; width: 60%; margin: 10px; }
  .result { text-align: center; margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>
<div class="container">
  <div class="sidebar">
    <h3>Progress</h3>
    <div class="status" id="status-box"></div>
  </div>

  <div class="question-area">
    <h1>UPSC Prelims Quiz - February 2025</h1>
    <div id="start-screen">
      <h2>Enter Your Name</h2>
      <input type="text" id="name" placeholder="Enter your full name" required><br>
      <button id="startButton">Start Quiz</button>
    </div>

    <div id="quiz-section" style="display:none;">
      <div class="timer">Time Left: <span id="timer">60:00</span></div>
      <div id="quiz"></div>
      <div style="text-align:center; margin-top:20px;">
        <button id="submitButton">Submit Quiz</button>
      </div>
      <div class="result" id="result"></div>
    </div>
  </div>
</div>

<script>
const questions = Array.from({length: 50}, (_, i) => ({
  q: `Sample UPSC-style question ${i+1}?`,
  options: ['Option A', 'Option B', 'Option C', 'Option D'],
  answer: Math.floor(Math.random() * 4)
}));

let status = Array(questions.length).fill('not-attempted');
let timeLeft = 60 * 60;
let timerInterval;

document.addEventListener("DOMContentLoaded", function() {
  const startBtn = document.getElementById("startButton");
  const submitBtn = document.getElementById("submitButton");
  if (startBtn) startBtn.addEventListener("click", startQuiz);
  if (submitBtn) submitBtn.addEventListener("click", submitQuiz);
});

function startQuiz() {
  const name = document.getElementById("name").value.trim();
  if (!name) { alert("Please enter your name to start the quiz."); return; }
  document.getElementById("start-screen").style.display = "none";
  document.getElementById("quiz-section").style.display = "block";
  startTimer();
  renderStatus();
  renderQuestions();
}

function startTimer() {
  const timerElement = document.getElementById("timer");
  timerInterval = setInterval(() => {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerElement.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    timeLeft--;
    if (timeLeft < 0) { clearInterval(timerInterval); submitQuiz(); alert("Time up! Quiz auto-submitted."); }
  }, 1000);
}

function renderStatus() {
  const box = document.getElementById("status-box");
  box.innerHTML = "";
  questions.forEach((_, i) => {
    const div = document.createElement("div");
    div.textContent = i + 1;
    div.className = "not-attempted";
    div.onclick = () => document.getElementById(`q${i}`).scrollIntoView({behavior:"smooth"});
    box.appendChild(div);
  });
}

function renderQuestions() {
  const quizDiv = document.getElementById("quiz");
  quizDiv.innerHTML = "";
  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.id = `q${i}`;
    const qText = document.createElement("h3");
    qText.textContent = `Q${i+1}. ${q.q}`;
    div.appendChild(qText);
    q.options.forEach((opt, idx) => {
      const label = document.createElement("label");
      const input = document.createElement("input");
      input.type = "radio";
      input.name = `q${i}`;
      input.value = idx;
      input.addEventListener("change", () => markAttempt(i));
      label.appendChild(input);
      label.append(` ${opt}`);
      div.appendChild(label);
    });
    quizDiv.appendChild(div);
  });
}

function markAttempt(i) {
  status[i] = "attempted";
  document.getElementById("status-box").children[i].className = "attempted";
}

function submitQuiz() {
  clearInterval(timerInterval);
  let score = 0, correct=0, wrong=0, unattempted=0;
  questions.forEach((q, i) => {
    const selected = document.querySelector(`input[name='q${i}']:checked`);
    if (!selected) { unattempted++; return; }
    const val = parseInt(selected.value);
    if (val === q.answer) { score += 2; correct++; }
    else { score -= 0.66; wrong++; }
  });
  const total = questions.length;
  document.getElementById("quiz-section").innerHTML = `<h2>Quiz Completed!</h2>
  <p>Total Questions: ${total}</p>
  <p>Correct: ${correct}, Wrong: ${wrong}, Unattempted: ${unattempted}</p>
  <h3>Final Score: ${score.toFixed(2)}</h3>
  <h4>Answer Key</h4>
  <ul>${questions.map((q,i)=>`<li>Q${i+1}: ${String.fromCharCode(65+q.answer)}</li>`).join('')}</ul>`;
}
</script>
</body>
</html>
